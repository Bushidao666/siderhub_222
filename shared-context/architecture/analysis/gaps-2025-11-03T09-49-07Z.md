# Gaps — Contratos pós-Fase 3

Timestamp: 2025-11-03T09:49:22Z

- useHubData (src/frontend/hooks/useHubData.ts) consome `/api/hub` como se retornasse `HubOverview` com bloco `academy`, mas o backend entrega `HubOverviewPayload` achatado (`featuredCourses`, `recommendations`). Resultado: agregador devolve 200 porém frontend ignora cursos/recomendações.
- POST `/academy/lessons/:id/rating` retorna `LessonRating`, enquanto `useLessonRating` propaga o objeto como `LessonRatingSummary` no cache (src/frontend/hooks/useLessonRating.ts), corrompendo média/contagem até novo fetch.
- Não existe GET `/academy/lessons/:id/progress`; `useLessonVideoTracking` tenta buscar snapshot e envia payload em ms com campos extras (`courseId`, `durationMs`, `positionMs`), falhando na validação do backend que espera `positionSeconds` (src/backend/api/academy/index.ts, src/frontend/hooks/useLessonVideoTracking.ts).
- HubMetricsOverview (src/frontend/components/hub/MetricsOverview.tsx) exige `CampaignMetrics` com `campaignId`, mas `/api/hidra/campaigns/metrics/overview` devolve `HidraMessageSummary`; componente atual assume CampaignMetrics.
