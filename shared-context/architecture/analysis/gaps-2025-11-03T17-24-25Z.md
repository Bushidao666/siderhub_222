# Gaps — Threads & Queues Audit

Timestamp: 2025-11-03T17:24:25Z

- **Moderation UI ignora replies** — `src/frontend/components/academy/comments/CommentThread.tsx:186` restringe `allowModeration` apenas ao nó raiz. Replies nunca exibem botões de aprovar/rejeitar, tornando impossível moderar respostas encadeadas exigidas pelo PRD (§3.2.4 Comentários com threads). Frontend precisa liberar ações para qualquer item pendente respeitando profundidade.
- **Workers BullMQ seguem como stubs** — `src/backend/jobs/workers/CampaignDispatchWorker.ts:20`, `MetricsSyncWorker.ts:20` e `CleanupWorker.ts:20` apenas logam e retornam `{ ok: true }`. Não há chamadas para `HidraService`, agregações ou rotinas de limpeza, mantendo disparos, métricas e housekeeping fora do ar.
- **Fila sem QueueScheduler** — `src/backend/jobs/queues/index.ts:29` cria filas BullMQ apenas com `Queue`/`QueueEvents`. Sem `QueueScheduler` (ou scheduler equivalente) jobs `repeat`/delayed não são promovidos, comprometendo sync periódico (ex.: métricas a cada 60s) descrito nas decisões d-004/d-017.
