# Type Safety Audit

Timestamp: 2025-11-03T09:48:08Z

- Fluxos críticos permanecem fortemente tipados: `src/backend/services/academy/AcademyService.ts:1` e `src/frontend/hooks/useLessonRating.ts:1` compartilham os DTOs de `@shared/types`, garantindo alinhamento entre service e hook.
- Zod cobre contratos de entrada/saída nos novos endpoints (`src/backend/api/academy/index.ts:18` e `src/backend/api/hub/index.ts:1`), mantendo validação antes de atingir a camada de serviços.
- Persistência de progresso/ratings reflete tipos prontos em Prisma (`prisma/schema.prisma:320`) e evita casts manuais na camada de aplicação.
- O `EvolutionClient` ainda expõe `request<T = any>` (`src/backend/services/hidra/EvolutionClient.ts:128`), permitindo propagação de `any` quando um schema não é fornecido; recomendamos especializar o tipo via generics obrigatórios ou wrappers específicos.
- A camada de estado cria um segundo `QueryClient` em `src/frontend/App.tsx:7` sem reutilizar o objeto tipado exportado por `src/frontend/lib/queryClient.ts:19`, o que pode mascarar bugs de cache em testes SSR ou de hidratação (além de duplicar o ponto de configuração).
