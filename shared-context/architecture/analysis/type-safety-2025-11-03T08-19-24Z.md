# Type Safety — SiderHub

Status: Needs improvements in a few hotspots. Timestamp: ${TS}

## Hotspots
- Service stubs typed as `any` — `src/backend/server.ts` (academyService, cybervaultService, hidraService, adminService).
- Prisma adapters rely on `unknown as` / `as any` casts — `src/backend/repositories/auth/*.ts` (enum mapping, JSON fields).
- EvolutionClient response casting uses `as unknown as T` — `src/backend/services/hidra/EvolutionClient.ts`.
- TokenService/AuthService use `as any` casts for TTL parsing — `src/backend/services/auth/TokenService.ts`, `src/backend/services/auth/AuthService.ts`.

## Recommendations
- Replace server stubs with properly typed service instances wired to Prisma repositories.
- Introduce explicit mapper functions for Prisma <-> Domain enums; avoid `unknown as`.
- Wrap EvolutionClient parsing with schema validation (Zod) per endpoint to guarantee `T` shape.
- Centralize duration/TTL parsing in a typed helper returning milliseconds; remove `as any`.
